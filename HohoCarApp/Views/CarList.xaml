<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="HohoCarApp.Views.CarList"
             x:Name="CarListPage"
             Title="Cars"
             BackgroundColor="#f5f5f5">

    <Grid RowDefinitions="Auto,Auto,*,Auto" Padding="16">
        <Grid Grid.Row="0" ColumnDefinitions="*" Padding="0,8">
            <Label Text="Available Cars" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   TextColor="Black"
                   VerticalTextAlignment="Center" 
                   HorizontalOptions="Center" />
        </Grid>

        <StackLayout Grid.Row="1" Spacing="15" Margin="0,16,0,0">
            <Frame Padding="15" 
                   CornerRadius="10" 
                   BackgroundColor="White" 
                   HasShadow="True">
                <Entry x:Name="SearchEntry"
                       Placeholder="Search cars..." 
                       FontSize="16"
                       BackgroundColor="Transparent"
                       TextChanged="OnSearchTextChanged" />
            </Frame>

            <StackLayout Spacing="10">
                <Label Text="Category" 
                       FontSize="16" 
                       FontAttributes="Bold" 
                       TextColor="#333" />
                <ScrollView Orientation="Horizontal" 
                           HorizontalScrollBarVisibility="Never">
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Button Text="All" 
                                x:Name="AllCategoryButton"
                                BackgroundColor="#007bff"
                                TextColor="White"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnCategoryFilterClicked" />
                        <Button Text="SUV" 
                                x:Name="SuvCategoryButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnCategoryFilterClicked" />
                        <Button Text="Sedan" 
                                x:Name="SedanCategoryButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnCategoryFilterClicked" />
                        <Button Text="Hatchback" 
                                x:Name="HatchbackCategoryButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnCategoryFilterClicked" />
                        <Button Text="Luxury" 
                                x:Name="LuxuryCategoryButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnCategoryFilterClicked" />
                    </StackLayout>
                </ScrollView>
            </StackLayout>

            <StackLayout Spacing="10">
                <Label Text="Fuel Type" 
                       FontSize="16" 
                       FontAttributes="Bold" 
                       TextColor="#333" />
                <ScrollView Orientation="Horizontal" 
                           HorizontalScrollBarVisibility="Never">
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Button Text="All" 
                                x:Name="AllFuelButton"
                                BackgroundColor="#007bff"
                                TextColor="White"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnFuelFilterClicked" />
                        <Button Text="Petrol" 
                                x:Name="PetrolFuelButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnFuelFilterClicked" />
                        <Button Text="Diesel" 
                                x:Name="DieselFuelButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnFuelFilterClicked" />
                        <Button Text="Electric" 
                                x:Name="ElectricFuelButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnFuelFilterClicked" />
                        <Button Text="Hybrid" 
                                x:Name="HybridFuelButton"
                                BackgroundColor="White"
                                TextColor="#666"
                                CornerRadius="20"
                                Padding="15,8"
                                Clicked="OnFuelFilterClicked" />
                    </StackLayout>
                </ScrollView>
            </StackLayout>
        </StackLayout>

        <Grid Grid.Row="2">
            <CollectionView ItemsSource="{Binding FilteredCars}"
                           Margin="0,16,0,0"
                           SelectionMode="None"
                           IsVisible="{Binding HasCars}">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="12" />
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="16" 
                               CornerRadius="12" 
                               BackgroundColor="White" 
                               HasShadow="True">
                            <Grid ColumnDefinitions="120,*,Auto" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="16">
                                <Frame Grid.RowSpan="3"
                                       WidthRequest="120"
                                       HeightRequest="90"
                                       CornerRadius="8"
                                       Padding="0"
                                       HasShadow="False"
                                       BackgroundColor="#f5f5f5">
                                    <Image Source="{Binding ImageUrl}"
                                           Aspect="AspectFill" />
                                </Frame>

                                <Label Grid.Column="1" 
                                       Text="{Binding Brand}" 
                                       FontAttributes="Bold" 
                                       FontSize="18" 
                                       TextColor="Black" />
                                <Label Grid.Column="1" 
                                       Grid.Row="1" 
                                       Text="{Binding Model}" 
                                       FontSize="16" 
                                       TextColor="#666" />

                                <Label Grid.Column="2" 
                                       Text="{Binding Price, StringFormat='â‚¬{0:N0}'}"
                                       FontSize="18" 
                                       FontAttributes="Bold" 
                                       TextColor="#007bff" 
                                       VerticalOptions="Start" />

                                <Grid Grid.Column="1" 
                                      Grid.Row="2" 
                                      ColumnDefinitions="Auto,Auto,Auto" 
                                      ColumnSpacing="16">
                                    <Label Text="{Binding Year, StringFormat='Year: {0}'}" 
                                           FontSize="12" 
                                           TextColor="#777" />
                                    <Label Grid.Column="1" 
                                           Text="{Binding Mileage, StringFormat='Km: {0:N0}'}" 
                                           FontSize="12" 
                                           TextColor="#777" />
                                    <Label Grid.Column="2" 
                                           Text="{Binding Category}" 
                                           FontSize="12" 
                                           TextColor="#777" />
                                </Grid>

                                <Button Grid.Column="2" 
                                        Grid.Row="2"
                                        Text="Details"
                                        CornerRadius="18"
                                        Padding="16,8"
                                        BackgroundColor="#343a40"
                                        TextColor="White"
                                        Command="{Binding BindingContext.SeeDetailsCommand, Source={x:Reference CarListPage}}"
                                        CommandParameter="{Binding}" />
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <StackLayout IsVisible="{Binding HasNoCars}"
                         VerticalOptions="Center"
                         HorizontalOptions="Center"
                         Spacing="20">
                <Label Text="ðŸš—" 
                       FontSize="60" 
                       HorizontalOptions="Center" />
                <Label Text="No Cars Available" 
                       FontSize="20" 
                       FontAttributes="Bold" 
                       TextColor="#666"
                       HorizontalOptions="Center" />
                <Label Text="Check back later for new vehicles" 
                       FontSize="14" 
                       TextColor="#999"
                       HorizontalOptions="Center" />
            </StackLayout>
        </Grid>

        <Frame Grid.Row="3" 
               BackgroundColor="White" 
               Padding="0,10,0,20"
               HasShadow="True"
               CornerRadius="0"
               Margin="-16,0,-16,0">
            <Grid ColumnDefinitions="*,*,*,*" ColumnSpacing="0">
                <StackLayout Grid.Column="0" 
                             Spacing="4" 
                             HorizontalOptions="Center">
                    <Label Text="ðŸ " 
                           FontSize="20" 
                           HorizontalOptions="Center" />
                    <Label Text="Home" 
                           FontSize="12" 
                           TextColor="#666"
                           HorizontalOptions="Center" />
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnHomeClicked" />
                    </StackLayout.GestureRecognizers>
                </StackLayout>
                
                <StackLayout Grid.Column="1" 
                             Spacing="4" 
                             HorizontalOptions="Center">
                    <Label Text="ðŸš—" 
                           FontSize="20" 
                           HorizontalOptions="Center" />
                    <Label Text="Cars" 
                           FontSize="12" 
                           TextColor="#007bff"
                           HorizontalOptions="Center" />
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnCarsClicked" />
                    </StackLayout.GestureRecognizers>
                </StackLayout>
                
                <StackLayout Grid.Column="2" 
                             Spacing="4" 
                             HorizontalOptions="Center">
                    <Label Text="ðŸ“°" 
                           FontSize="20" 
                           HorizontalOptions="Center" />
                    <Label Text="News" 
                           FontSize="12" 
                           TextColor="#666"
                           HorizontalOptions="Center" />
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnNewsClicked" />
                    </StackLayout.GestureRecognizers>
                </StackLayout>
                
                <StackLayout Grid.Column="3" 
                             Spacing="4" 
                             HorizontalOptions="Center">
                    <Label Text="ðŸ”" 
                           FontSize="20" 
                           HorizontalOptions="Center" />
                    <Label Text="Login" 
                           FontSize="12" 
                           TextColor="#666"
                           HorizontalOptions="Center" />
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnLoginClicked" />
                    </StackLayout.GestureRecognizers>
                </StackLayout>
            </Grid>
        </Frame>
    </Grid>
</ContentPage>

